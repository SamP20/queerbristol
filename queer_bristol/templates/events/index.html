{% extends "base.html" %}

{% block title %}Events{% endblock %}

{% block contents %}
<div class="container">
    <ul class="list-box">
        {% for event in events %}
        {% set start = event.start|localtime %}
        <li>
            <h2><a href="{{ url_for('events.event', event_id=event.id)}}">{{ event.title }}</a></h2>
            {% if event.end %}
            {% set end = event.end|localtime %}
            {% if end.date() == start.date() %}
            <p>{{ start.strftime('%a %-d %b') }} {{ start.strftime('%H:%M') }} - {{ end.strftime('%H:%M') }}</p>
            {% else %}
            <p>{{ start.strftime('%a %-d %b %H:%M') }} - {{ end.strftime('%a %-d %b %H:%M') }}</p>
            {% endif %}
            {% else %}
            <p>{{ start.strftime('%a %-d %b %H:%M') }}</p>
            {% endif %}
            
            <p>Location: {{ event.venue }}</p>
            <p>{{ event.description | truncate(150,true) }}</p>
        </li>
        {% endfor %}
    </ul>
    <div class="pagination">
        {% if prev_url %}
        <a href="{{ prev_url }}">&#171; Sooner</a>
        {% endif %}
        {% if next_url %}
        <a href="{{ next_url }}">Later &#187;</a>
        {% endif %}
    </div>
</div>
{% endblock %}